const Utils = {
    translations: {
        es: {
            'age-title': 'Verificación de Edad',
            'age-text': 'Este contenido está destinado únicamente para mayores de 18 años. Por favor, confirma tu edad para continuar.',
            'age-confirm': 'Soy mayor de 18',
            'age-deny': 'Soy menor de 18',
            'loading-text': 'Cargando...',
            'gallery-title': 'Galería くろねこ',
            'load-more': 'Cargar más',
            'nav-gallery': 'Galería',
            'nav-about': 'Acerca',
            'nav-contact': 'Contacto',
            'about-title': 'Acerca de くろねこ',
            'about-text': 'Somos una galería dedicada al arte visual contemporáneo, explorando nuevas fronteras de la expresión creativa.',
            'contact-title': 'Contacto',
            'contact-text': 'Ponte en contacto con nosotros para más información sobre nuestras obras y exposiciones.',
            'download': 'Descargar',
            'zoom': 'Zoom',
            'access-denied': 'Acceso denegado. Debes ser mayor de 18 años para acceder a este contenido.',
            'image-desc': 'Descripción de la imagen',
            'download': 'Descargar',
            'zoom': 'Zoom',
            'zoom-out': 'Reducir',
            'download-success': '¡Descarga completada!',
            'download-error': 'Error en la descarga. Intenta nuevamente.',
            'download-options': 'Opciones de descarga',
            'download-restricted': 'No se puede descargar directamente debido a restricciones del servidor.',
            'open-tab': 'Abrir en nueva pestaña',
            'copy-link': 'Copiar enlace',
            'close': 'Cerrar',
            'copy-success': 'Enlace copiado al portapapeles',
            'copy-error': 'Error al copiar el enlace',
            'loading-text': 'Cargando imágenes...',
            'shop-title': 'Tienda くろねこ',
            'shop-subtitle': 'Obras exclusivas disponibles para coleccionistas',
            'shop-empty': 'No hay productos disponibles en este momento.',
            'nav-gallery': 'Galería',
            'nav-shop': 'Tienda',
            'view-details': 'Ver Detalles',
            'contact': 'Contactar',
            'contact-title': 'Contactar sobre:',
            'contact-name': 'Nombre completo',
            'contact-email': 'Correo electrónico',
            'contact-message': 'Mensaje',
            'contact-message-placeholder': 'Estoy interesado en este producto y me gustaría obtener más información.',
            'contact-cancel': 'Cancelar',
            'contact-submit': 'Enviar mensaje',
            'contact-success': 'Mensaje enviado correctamente. Nos pondremos en contacto pronto.',
            'contact-error': 'Error al enviar el mensaje. Por favor, inténtalo de nuevo.'
        },
        en: {
            'age-title': 'Age Verification',
            'age-text': 'This content is intended only for users over 18 years old. Please confirm your age to continue.',
            'age-confirm': 'I am over 18',
            'age-deny': 'I am under 18',
            'loading-text': 'Loading...',
            'gallery-title': 'Gallery くろねこ',
            'load-more': 'Load more',
            'nav-gallery': 'Gallery',
            'nav-about': 'About',
            'nav-contact': 'Contact',
            'about-title': 'About くろねこ',
            'about-text': 'We are a gallery dedicated to contemporary visual art, exploring new frontiers of creative expression.',
            'contact-title': 'Contact',
            'contact-text': 'Contact us for more information about our works and exhibitions.',
            'download': 'Download',
            'zoom': 'Zoom',
            'zoom-out': 'Zoom Out',
            'download-success': 'Download completed!',
            'download-error': 'Download error. Please try again.',
            'download-options': 'Download Options',
            'download-restricted': 'Cannot download directly due to server restrictions.',
            'open-tab': 'Open in new tab',
            'copy-link': 'Copy link',
            'close': 'Close',
            'copy-success': 'Link copied to clipboard',
            'copy-error': 'Error copying link',
            'loading-text': 'Loading images...',
            'shop-title': 'Shop くろねこ',
            'shop-subtitle': 'Exclusive works available for collectors',
            'shop-empty': 'No products available at the moment.',
            'nav-gallery': 'Gallery',
            'nav-shop': 'Shop',
            'view-details': 'View Details',
            'contact': 'Contact',
            'contact-title': 'Contact about:',
            'contact-name': 'Full name',
            'contact-email': 'Email address',
            'contact-message': 'Message',
            'contact-message-placeholder': 'I am interested in this product and would like more information.',
            'contact-cancel': 'Cancel',
            'contact-submit': 'Send message',
            'contact-success': 'Message sent successfully. We will contact you soon.',
            'contact-error': 'Error sending message. Please try again.'
        },
        ja: {
            'age-title': '年齢確認',
            'age-text': 'このコンテンツは18歳以上の方のみを対象としています。続行するには年齢を確認してください。',
            'age-confirm': '18歳以上です',
            'age-deny': '18歳未満です',
            'loading-text': '読み込み中...',
            'gallery-title': 'ギャラリー くろねこ',
            'load-more': 'もっと読み込む',
            'nav-gallery': 'ギャラリー',
            'nav-about': 'について',
            'nav-contact': 'お問い合わせ',
            'about-title': 'くろねこについて',
            'about-text': '私たちは現代ビジュアルアートに特化したギャラリーで、創造的な表現の新たなフロンティアを探求しています。',
            'contact-title': 'お問い合わせ',
            'contact-text': '作品や展示会に関する詳細情報は、お問い合わせください。',
            'download': 'ダウンロード',
            'zoom': 'ズーム',
            'zoom-out': 'ズームアウト',
            'download-success': 'ダウンロードが完了しました！',
            'download-error': 'ダウンロードエラー。もう一度お試しください。',
            'download-options': 'ダウンロードオプション',
            'download-restricted': 'サーバーの制限により直接ダウンロードできません。',
            'open-tab': '新しいタブで開く',
            'copy-link': 'リンクをコピー',
            'close': '閉じる',
            'copy-success': 'リンクをクリップボードにコピーしました',
            'copy-error': 'リンクのコピー中にエラーが発生しました',
            'loading-text': '画像を読み込み中...',
            'shop-title': 'ショップ くろねこ',
            'shop-subtitle': 'コレクター向けの限定作品',
            'shop-empty': '現在ご利用可能な商品はありません',
            'nav-gallery': 'ギャラリー',
            'nav-shop': 'ショップ',
            'view-details': '詳細を見る',
            'contact': 'お問い合わせ',
            'contact-title': 'について問い合わせる:',
            'contact-name': '氏名',
            'contact-email': 'メールアドレス',
            'contact-message': 'メッセージ',
            'contact-message-placeholder': 'この商品に興味があります。詳細情報をご提供ください。',
            'contact-cancel': 'キャンセル',
            'contact-submit': 'メッセージを送信',
            'contact-success': 'メッセージを送信しました。すぐにご連絡いたします。',
            'contact-error': 'メッセージの送信に失敗しました。もう一度お試しください。'
        }
    },
    fetchImageData: async function(scriptUrl) {
        try {
            const response = await fetch(scriptUrl, {
                method: 'GET',
                headers: {
                    'Accept': 'text/plain; charset=utf-8',
                }
            });
            if (!response.ok) {
                throw new Error('Error al cargar datos: ' + response.status)
            }
            const textData = await response.text();
            const lines = textData.split('\n').filter(line => line.trim() !== '');
            const imageData = [];
            for (const line of lines) {
                const parts = line.split('|');
                if (parts.length >= 5) {
                    imageData.push({
                        id: parseInt(parts[0]) || 0,
                        title: parts[1] || '',
                        description: parts[2] || '',
                        thumbnail: parts[3] || '',
                        fullSize: parts[4] || ''
                    })
                }
            }
            return imageData
        } catch (error) {
            console.error('Error fetching image data:', error);
            return this.getFallbackImageData()
        }
    },
    getFallbackImageData: function() {
        return [{
            id: 1,
            title: "...",
            description: "...",
            thumbnail: "../assets/img/img1.png",
            fullSize: "../assets/img/img1.png"
        }]
    },
    detectBrowserLanguage: function() {
        const browserLang = navigator.language || navigator.userLanguage;
        const langCode = browserLang.split('-')[0];
        if (this.translations[langCode]) {
            return langCode
        }
        return 'es'
    },
    updateTexts: function(language) {
        const elements = document.querySelectorAll('[data-lang]');
        elements.forEach(element => {
            const key = element.getAttribute('data-lang');
            if (this.translations[language] && this.translations[language][key]) {
                element.textContent = this.translations[language][key]
            }
        })
    },
    simulateLoading: function(duration = 2000) {
        return new Promise(resolve => {
            setTimeout(() => {
                resolve()
            }, duration)
        })
    },
    handleSmoothScrolling: function() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    })
                }
            })
        })
    }
}